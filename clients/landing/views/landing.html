<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://bootswatch.com/4/litera/bootstrap.min.css">
	
  <title>Landing</title>
</head>
<body>
  <nav class="navbar navbar-default">
		<div class="container">
			<div class="navbar-header">
				<a href="#" class="navbar-brand">My Website</a>
			</div>
		</div>
	</nav>

	<div class="container">
		<form id="leadForm" class="leadForm">
			<div class="form-group">
				<label>Name</label>
				<input type="text" name="name" class="form-control"  placeholder="Name">
			</div>
			<div class="form-group">
				<label>Email</label>
				<input type="text" name="email" class="form-control" placeholder="Email">
			</div>
			<div class="form-group">
				<label>Message</label>
				<textarea name="message" class="form-control" placeholder="Message"></textarea> 
			</div>
			<br>
			<input type="hidden" name="lead_id" value="<%= lead_id %>">
			<button type="submit" name="submit" class="btn btn-primary">Submit</button>
		</form>
	</div>
	<script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>

	<script>
	// var mailRegex = /^([\w-]+(?:\.[\w-]+))@((?:[\w-]+\.)\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;

// Paste the code here
$(".leadForm").on('submit',(function(e) {
	e.preventDefault();   
	var flag = 0;
	var formData = new FormData(this);
	var This = this;

	if(formData.get('name') == '' || formData.get('name') == null){
		flag=0;
		return false;
	} else {
			flag=1;
			console.log('Name: ', formData.get('name'));
	}
	console.log('Lead id: ', formData.get('lead_id'));
	
	if(formData.get('email') == '' || formData.get('email') == null){
			flag=0;
			return false;
	} else {
			// if(mailRegex.test(formData.get('email')))
			// {
			// 		flag=1;

			// }
			// else{
			// 		flag=0;
			// 		return false;
			// }
		console.log('Email: ', formData.get('email'));

	}
	if(formData.get('message') == '' || formData.get('message') == null){
			flag=0;
			return false;
	} else {
			flag=1;
		console.log('Message: ', formData.get('message'));
		
	}
	console.log('Flag: ', flag);

	if(flag==1){
		$.ajax({
			url: "/enquiry", 					// Url to which the request is send
			type: "POST",             // Type of request to be send, called as method
			data: formData, 					// Data sent to server, a set of key/value pairs (i.e. form fields and values)
			contentType: false,       // The content type used when sending data to the server.
			cache: false,             // To unable request pages to be cached
			processData:false,        // To send DOMDocument or non processed data file it is set to false
			success: function(responce)   // A function to be called if request succeeds
			{
				// console.log(responce);
				if(responce.status){
				console.log('Successs');
					$(This).trigger("reset");
				} else {
					console.log('fail');
				
				}
			}
		});
	}
}));
	</script>
</body>
</html>